<form class="form form-horizontal" [formGroup]="EditAppAssetForm" #formDirective="ngForm"
      (ngSubmit)="EditAppAssetForm.valid  && SaveData()" #enjiForm="ngForm">
  <lib-ucSubsection [id]="'AssetInfo'" [title]="'Asset Information'" [panel]="'AssetInfo'">
  </lib-ucSubsection>
  <div id="AssetInfo">
    <!--ROW 1-->
    <div class="form-group row">
      <label class="col-md-2  adInsLabel" translate>Asset Name</label>
      <div class="col-md-4">
        <label class="adInsLabel"> {{AppAssetObj.FullAssetName}} </label>
      </div>

      <label class="col-md-2"
             [ngClass]="(SerialNoLabelMandatory[0] && IsCheckSerialMandatory)?'adins-required-label':'adInsLabel'"
             *ngIf="SerialNoLabelList[0]" translate>{{SerialNoLabelList[0]}}</label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="SerialNo1" *ngIf="SerialNoLabelList[0]">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.SerialNo1" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
    </div><br>

    <!--ROW 2-->
    <div class="form-group row">
      <label class="col-md-2  adInsLabel" translate>Supplier Branch Name</label>
      <div class="col-md-4">
        <label class="adInsLabel"> {{AppAssetObj.SupplName}} </label>
      </div>

      <label class="col-md-2"
             [ngClass]="(SerialNoLabelMandatory[1] && IsCheckSerialMandatory)?'adins-required-label':'adInsLabel'"
             *ngIf="SerialNoLabelList[1]" translate>{{SerialNoLabelList[1]}}</label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="SerialNo2" *ngIf="SerialNoLabelList[1]">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.SerialNo2" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
    </div><br>

    <!--ROW 3-->
    <div class="form-group row">
      <label class="col-md-2 adins-required-label" translate>Manufacturing Year</label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="ManufacturingYear">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.ManufacturingYear" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>

      <label class="col-md-2 "
             [ngClass]="(SerialNoLabelMandatory[2] && IsCheckSerialMandatory)?'adins-required-label':'adInsLabel'"
             *ngIf="SerialNoLabelList[2]" translate>{{SerialNoLabelList[2]}}</label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="SerialNo3" *ngIf="SerialNoLabelList[2]">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.SerialNo3" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
    </div><br>

    <!--ROW 4-->
    <div class="form-group row">
      <label class="col-md-2 " [ngClass]="(tempColor)?'adins-required-label':'adInsLabel'" translate>Color</label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="AssetColor">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.AssetColor" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>

      <label class="col-md-2 "
             [ngClass]="(SerialNoLabelMandatory[3] && IsCheckSerialMandatory)?'adins-required-label':'adInsLabel'"
             *ngIf="SerialNoLabelList[3]" translate>{{SerialNoLabelList[3]}}</label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="SerialNo4" *ngIf="SerialNoLabelList[3]">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.SerialNo4" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
    </div><br>

    <!--ROW 5-->
    <div class="form-group row">
      <label class="col-md-2  adins-required-label" translate>Asset Usage</label>
      <div class="col-md-4">
        <select class="form-control" id="assetUsage" formControlName="MrAssetUsageCode"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls.MrAssetUsageCode.invalid }">
          <option value="">-Select One-</option>
          <option *ngFor="let item of AssetUsageObj" [value]="item.Key">
            {{item.Value}}
          </option>
        </select>
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.MrAssetUsageCode"
                            [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>

      <label class="col-md-2 "
             [ngClass]="(SerialNoLabelMandatory[4] && IsCheckSerialMandatory)?'adins-required-label':'adInsLabel'"
             *ngIf="SerialNoLabelList[4]" translate>{{SerialNoLabelList[4]}}</label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="SerialNo5" *ngIf="SerialNoLabelList[4]">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.SerialNo5" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
    </div>
  </div>

  <lib-ucSubsection [id]="'userDataId'" [title]="'Asset User'" [panel]="'userData'">
  </lib-ucSubsection>
  <div id="userData">
    <div class="form-group row">
      <label class="col-md-2" for="selfUsage" translate>Self Usage</label>
      <div class="col-md-4">
        <mat-checkbox formControlName="SelfUsage" (change)="SelfUsageChange($event)"></mat-checkbox>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-md-2  adInsLabel" translate>User Name </label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="UserName">
      </div>
    </div>
    <div class="form-group row">
      <label class="col-md-2  adins-required-label" translate>User Relationship </label>
      <div class="col-md-4">
        <select class="form-control" id="userRelationship" formControlName="MrUserRelationshipCode"
                style="width:50%">
          <option value="">-Select One-</option>
          <option *ngFor="let item of UserRelationObj" [value]="item.Key">
            {{item.Value}}
          </option>
        </select>
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.MrUserRelationshipCode"
                            [submit]="enjiForm.submitted"></lib-uc-show-errors>
      </div>
    </div>
  </div>
  
  <lib-ucSubsection [id]="'ownerDataId'" [title]="'Asset Owner'" [panel]="'ownerData'">
  </lib-ucSubsection>
  <div id="ownerData">
    <div class="form-group row">
      <label class="col-md-2" for="selfOwner" translate>Self Owner</label>
      <div class="col-md-4">
        <mat-checkbox formControlName="SelfOwner" (change)="SelfOwnerChange($event)"></mat-checkbox>
      </div>
      <label class="col-md-2" translate>Owner Type</label>
      <div class="col-md-4">
        <mat-radio-group formControlName="MrOwnerTypeCode" (change)="OwnerTypeChange($event.value, true)">
          <mat-radio-button class="custom-control custom-radio display-inline-block" *ngFor="let item of OwnerTypeObj"
                            [value]="item.Key">
            {{item.Value}}
          </mat-radio-button>
        </mat-radio-group>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-md-2  adInsLabel" translate>Owner Name </label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="OwnerName">
      </div>
      <label class="col-md-2  adins-required-label" translate>Id Type </label>
      <div class="col-md-4">
        <select class="form-control" id="idType" formControlName="MrIdTypeCode" (change)="onOptionsSelected()"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls.MrIdTypeCode.invalid }"
                style="width:50%">
          <option value="">-Select One-</option>
          <option *ngFor="let item of IdTypeObj" [value]="item.Key">
            {{item.Value}}
          </option>
        </select>
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.MrIdTypeCode" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-md-2  adins-required-label" translate>Owner Relationship </label>
      <div class="col-md-4">
        <select class="form-control" id="userRelationship" formControlName="MrOwnerRelationshipCode"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls.MrOwnerRelationshipCode.invalid }"
                style="width:50%">
          <option value="">-Select One-</option>
          <option *ngFor="let item of OwnerRelationObj" [value]="item.Key">
            {{item.Value}}
          </option>
        </select>
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.MrOwnerRelationshipCode" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
      <label class="col-md-2  adInsLabel" translate>Owner Id No </label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="OwnerIdNo" [readonly]="isReadOnly">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.OwnerIdNo" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-md-2 adins-required-label" translate>Owner Profession</label>
      <div class="col-md-4" *ngIf="EditAppAssetForm.controls.MrOwnerTypeCode.value == 'PERSONAL'">
        <lib-uclookupgeneric *ngIf="InputLookupProfessionObj.isReady" [enjiForm]="enjiForm"
                             [lookupInput]="InputLookupProfessionObj" [parentForm]="EditAppAssetForm" [identifier]="'lookupProfessionData'"
                             (lookup)="GetProfession($event)" #LookupProfession>
        </lib-uclookupgeneric>
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.OwnerProfessionCode" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
      <div class="col-md-4" *ngIf="EditAppAssetForm.controls.MrOwnerTypeCode.value == 'COMPANY'">
        <select class="form-control adInsInput" style="width: auto" formControlName="OwnerProfessionCode"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls.OwnerProfessionCode.invalid }">
          <option value="">Select One</option>
          <option *ngFor="let it of OwnerProfessionObj " [value]="it.Key">
            {{it.Value}}
          </option>
        </select>
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.OwnerProfessionCode" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
      <label class="col-md-2  adInsLabel" translate>Mobile Phone </label>
      <div class="col-md-4">
        <input type="text" class="form-control" formControlName="OwnerMobilePhnNo">
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.OwnerMobilePhnNo" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-md-2" translate>Copy Address</label>
      <div class="col-md-4">
        <div class="input-group">
          <select class="form-control" formControlName="OwnerAddrType"
                  (change)="SetOwnerAddrType($event.target.value)">
            <option value="">-Select One-</option>
            <option *ngFor="let item of AppCustAddrObj" [value]="item.MrCustAddrTypeCode">
              {{item.MrCustAddrTypeCode}}
            </option>
          </select>
          <div class="input-group-append">
            <span class="input-group-btn" *ngIf="!EditAppAssetForm.controls.SelfOwner.value">
              <button class="btn btn-raised btn-primary" type="button" (click)="copyToOwnerAddr()">
                <i class="fa fa-check-square-o"></i>&nbsp;<span translate>Copy</span>
              </button>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="form-group row">
    <div class="col-md-12">
      <lib-ucaddress #UcAddrGrp [addressObj]="inputAddressObjForOwner" [enjiForm]="enjiForm" [identifier]="'ownerData'"
                     [UCAddrForm]="EditAppAssetForm"></lib-ucaddress>
      <!-- <lib-ucaddress #UcAddrGrp [showSubsection]="false" [UCAddrForm]="AssetDataForm" [enjiForm]="enjiForm"
                   [identifier]="'ownerData'" [default]="ownerAddrObj" [inputField]="inputFieldOwnerAddrObj"
                   [showAllPhn]="false"></lib-ucaddress> -->
    </div>
  </div>

  <div *ngIf="AppAssetAttrObj != null">
    <lib-ucSubsection [id]="'AppAssetAttrId'" [title]="'Asset Attribute'" [panel]="'assetAttr'">
    </lib-ucSubsection>
    <div id="assetAttr">
      <!-- <div class="form-actions right">
        <button type="button" name="refreshAttr" id="add" (click)="refreshAttr()"
          class="btn btn-raised btn-primary">
          Refresh Attribute
        </button>
      </div> -->
      <div formArrayName="AppAssetAttrObjs">
        <div *ngFor="let item of EditAppAssetForm.controls['AppAssetAttrObjs'].controls;let i = index">
          <div [formGroupName]="i" class="form-group row">
            <label class="col-md-3  adInsLabel" translate>{{item.controls.AssetAttrName.value}}</label>
            <div class="col-md-3">
              <div *ngIf="item.controls.AttrInputType.value == 'T'">
                <input type="text" class="form-control" formControlName="AttrValue"
                       [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls['AppAssetAttrObjs']['controls'][i]['controls'].AttrValue.invalid }">
                <lib-uc-show-errors
                  [control]="EditAppAssetForm.controls['AppAssetAttrObjs']['controls'][i]['controls'].AttrValue"
                  [submit]="enjiForm.submitted"></lib-uc-show-errors>
              </div>
              <div *ngIf="item.controls.AttrInputType.value == 'N'">
                <input type="" currencyMask class="form-control" formControlName="AttrValue"
                       [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls['AppAssetAttrObjs']['controls'][i]['controls'].AttrValue.invalid }">
                <lib-uc-show-errors
                  [control]="EditAppAssetForm.controls['AppAssetAttrObjs']['controls'][i]['controls'].AttrValue"
                  [submit]="enjiForm.submitted"></lib-uc-show-errors>
              </div>
              <div *ngIf="item.controls.AttrInputType.value == 'D'">
                <input type="date" class="form-control" formControlName="AttrValue"
                       [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls['AppAssetAttrObjs']['controls'][i]['controls'].AttrValue.invalid }">
                <lib-uc-show-errors
                  [control]="EditAppAssetForm.controls['AppAssetAttrObjs']['controls'][i]['controls'].AttrValue"
                  [submit]="enjiForm.submitted"></lib-uc-show-errors>
              </div>
              <div *ngIf="item.controls.AttrInputType.value == 'L'">
                <select class="form-control" formControlName="AttrValue" style="width:50%"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls['AppAssetAttrObjs']['controls'][i]['controls'].AttrValue.invalid }">
                  <option value="">-Select One-</option>
                  <option *ngFor="let x of ListAttrAnswer[i][0]" value="{{x}}">
                    {{x}}
                  </option>
                </select>
                <lib-uc-show-errors
                  [control]="EditAppAssetForm.controls['AppAssetAttrObjs']['controls'][i]['controls'].AttrValue"
                  [submit]="enjiForm.submitted">
                </lib-uc-show-errors>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <lib-ucSubsection [id]="'AddAssetDocumentId'" [title]="'Asset Document'" [panel]="'AddAssetDocument'">
  </lib-ucSubsection>
  <div id="AddAssetDocument">
    <div class="form-body" formArrayName="ListDoc" style="overflow-x: auto;">
      <table class="table table-responsive-md text-center table-hover">
        <thead>
          <tr class="table-header">
            <th><span translate class="thead-header">Document</span></th>
            <th><span translate class="thead-header">Received</span></th>
            <th><span translate class="thead-header">Document No</span></th>
            <th><span translate class="thead-header">Expired Date</span></th>
            <th><span translate class="thead-header">Document Notes</span></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of EditAppAssetForm.controls.ListDoc['controls']; let i = index" [formGroupName]="i">
            <td>{{item.controls.AssetDocName.value}}</td>
            <td>
              <input type="checkbox" class="border-primary" formControlName="IsReceived">
            </td>
            <td>
              <input type="text" class="form-control width-100-per" formControlName="DocNo">
              <lib-uc-show-errors [control]="EditAppAssetForm.controls.DocNo" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </td>
            <td>
              <input type="date" class="form-control width-100-per" formControlName="ACDExpiredDt">
              <lib-uc-show-errors [control]="EditAppAssetForm.controls.ACDExpiredDt" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </td>
            <td>
              <input type="text" class="form-control width-100-per" formControlName="DocNotes">
              <lib-uc-show-errors [control]="EditAppAssetForm.controls.DocNotes" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <lib-ucSubsection [id]="'insuranceInfoId'" [title]="'Insurance Company Data'" [panel]="'insuranceCompanyData'">
  </lib-ucSubsection>
  <div *ngIf="appInsObjObj && appInsObjObj.InsAssetCoveredBy != 'OFF'" id="insuranceCompanyData">
    <div class="form-group row">
      <label class="col-md-3 adins-required-label" for="insuredBy" translate>Insco Branch Name</label>
      <div class="col-md-3" *ngIf="appInsObjObj && appInsObjObj.InsAssetCoveredBy == 'CO'" >
        <select class="form-control full-width" id="insuredBy" formControlName="InscoBranchCode"
                (change)="InscoBranchCodeChanged($event)"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls.InscoBranchCode.invalid }">
          <option value="">-Select One-</option>
          <option *ngFor="let item of inscoBranchObj" [value]="item.Key">
            {{item.Value}}
          </option>
        </select>
        <lib-uc-show-errors [control]="EditAppAssetForm.controls.InscoBranchCode" [submit]="enjiForm.submitted">
        </lib-uc-show-errors>
      </div>
      <div class="col-md-3" *ngIf="appInsObjObj && appInsObjObj.InsAssetCoveredBy == 'CU'" >
        <input type="text" class="form-control" formControlName="InscoBranchName"
               [ngClass]="{ 'is-invalid': enjiForm.submitted && EditAppAssetForm.controls.InscoBranchName.invalid }">
        <lib-uc-show-errors
          [control]="EditAppAssetForm.controls.InscoBranchName"
          [submit]="enjiForm.submitted"></lib-uc-show-errors>
      </div>
    </div>
    <div class="form-group row">
      <label class="col-md-3 adInsLabel" translate>Total Main Premi from Insco</label>
      <label class="col-md-3 text-right"> {{appInsObjObj.TotalInscoMainPremiAmt | number:'.2':'en-US'}} </label>
    </div>
    <div class="form-group row">
      <label class="col-md-3 adInsLabel" translate>Total Additional Premi from Insco</label>
      <label class="col-md-3 text-right"> {{appInsObjObj.TotalInscoAddPremiAmt | number:'.2':'en-US'}} </label>
    </div>
    <div class="form-group row">
      <label class="col-md-3 adInsLabel" translate>Total Fee from Insco</label>
      <label class="col-md-3 text-right"> {{appInsObjObj.InscoAdminFeeAmt + appInsObjObj.InscoStampDutyFee |
        number:'.2':'en-US'}} </label>
    </div>
    <div class="form-group row">
      <label class="col-md-3 adInsLabel" translate>Total Premi from Insco</label>
      <label class="col-md-3 text-right"> {{appInsObjObj.TotalInsInscoAmt | number:'.2':'en-US'}} </label>
    </div>
  </div>
  <br>
  <div class="form-actions right">
    <button type="button" class="btn btn-raised btn-warning mr-1" (click)="CancelClick()">
      <i class="ft-x"></i>&nbsp;<span translate>Cancel</span>
    </button>
    <button type="submit" class="btn btn-raised btn-primary">
      <i class="far fa-check-square"></i>&nbsp;<span translate>Save</span>
    </button>
  </div>
</form>
