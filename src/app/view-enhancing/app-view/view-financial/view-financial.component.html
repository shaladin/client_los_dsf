<div *ngIf="BizTemplateCode !== 'OPL'">
  <lib-ucSubsection [id]="'FinData_SubsidyId'" [title]="'Subsidy'" [panel]="'FinData_Subsidy'">
  </lib-ucSubsection>
  <div id="FinData_Subsidy">
    <table class="table table-responsive-md text-center table-hover">
      <thead>
        <tr class="table-header">
          <th style="text-align: left;"><span class="thead-header" name="MrSubsidyFromTypeName" translate>From Type
              Name
            </span>
          </th>
          <th style="text-align: left;"><span class="thead-header" name="MrSubsidyFromValueName" translate>From Value
              Name
            </span>
          </th>
          <th style="text-align: left;"><span class="thead-header" name="MrSubsidyAllocName" translate>Subsidy
              Allocation
            </span>
          </th>
          <th style="text-align: left;"><span class="thead-header" name="MrSubsidySourceName" translate>Subsidy
            Source
          </span>
          </th>
          <th style="text-align: left;"><span class="thead-header" name="MrSubsidyValueTypeName" translate>Subsidy
              Value Type
            </span>
          </th>
          <th style="text-align: center;"><span class="thead-header" name="SubsidyAmt" translate>Subsidy Value
            </span>
          </th>
        </tr>
      </thead>
      <tbody *ngIf = "listSubsidy == undefined">
        <tr>
          <td colspan="100%">No Data Available</td>
        </tr>
      </tbody>
      <tbody *ngIf = "listSubsidy != undefined">
        <tr *ngFor="let item of listSubsidy; let i = index">
          <td style="text-align: left;">{{item.MrSubsidyFromTypeName}}</td>
          <td style="text-align: left;">{{item.MrSubsidyFromValueName}}</td>
          <td style="text-align: left;">{{item.MrSubsidyAllocName}}</td>
          <td style="text-align: left;">{{item.MrSubsidySourceName}}</td>
          <td style="text-align: left;">{{item.MrSubsidyValueTypeName}}</td>
          <td style="text-align: right;">{{item.SubsidyAmt | number : '1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <lib-ucSubsection [id]="'feeId'" [title]="'Fee'" [panel]="'fee'">
  </lib-ucSubsection>
  <div class="form-body" id="fee">
    <div class="form-group row">
      <div class="col-md-12" *ngFor="let item of listAppFeeObj">
        <div class="row">
          <div class="col-md-3">
            <label class="adInsLabel" style="text-align: right;"> {{item.FeeTypeName}} </label>
          </div>
          <div class="col-md-3">
            <label class="adInsLabel" style="text-align: right;"> {{item.AppFeeAmt | number:'.2':'en-US'}} </label>
          </div>
          <div class="col-md-3">
            <label class="adInsLabel" style="text-align: right;"> {{item.FeeTypeName + ' Capitalized Amount'}} </label>
          </div>
          <div class="col-md-3">
            <label class="adInsLabel" style="text-align: right;"> {{item.FeeCapitalizeAmt | number:'.2':'en-US'}} </label>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <lib-ucSubsection [id]="'financialDataId'" [title]="'Financial Data'" [panel]="'financialData'">
  </lib-ucSubsection>
  <div class="form-body" id="financialData">
    <div class="form-group row">
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-6">
            <label class="adInsLabel" translate> Total Asset Price </label>
          </div>
          <div class="col-md-6">
            <label class="adInsLabel"> {{appFinDataObj?.TotalAssetPriceAmt | number:'.2':'en-US'}} </label>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-6">
          </div>
          <div class="col-md-6">
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-6">
            <label class="adInsLabel" translate> Total Fee </label>
          </div>
          <div class="col-md-6">
            <label class="adInsLabel"> {{appFinDataObj?.TotalFeeAmt | number:'.2':'en-US'}} </label>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-6">
            <label class="adInsLabel" translate> Total Fee Capitalized </label>
          </div>
          <div class="col-md-6">
            <label class="adInsLabel"> {{appFinDataObj?.TotalFeeCptlzAmt | number:'.2':'en-US'}} </label>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-6">
            <label class="adInsLabel" translate> Total Insurance Premi </label>
          </div>
          <div class="col-md-6">
            <label class="adInsLabel"> {{appFinDataObj?.TotalInsCustAmt | number:'.2':'en-US'}} </label>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-6">
            <label class="adInsLabel" translate> Total Insurance Premi Capitalized </label>
          </div>
          <div class="col-md-6">
            <label class="adInsLabel">{{appFinDataObj?.InsCptlzAmt | number:'.2':'en-US'}} </label>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-6">
            <label class="adInsLabel" translate> Total Life Insurance Premi </label>
          </div>
          <div class="col-md-6">
            <label class="adInsLabel"> {{appFinDataObj?.TotalLifeInsCustAmt | number:'.2':'en-US'}} </label>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-md-6">
            <label class="adInsLabel" translate> Total Life Insurance Premi Capitalized </label>
          </div>
          <div class="col-md-6">
            <label class="adInsLabel"> {{appFinDataObj?.LifeInsCptlzAmt | number:'.2':'en-US'}} </label>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br>
  <div class="form-group row">
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" *ngIf="BizTemplateCode != 'FL4W'" translate> DP Asset </label>
          <label class="adInsLabel" *ngIf="BizTemplateCode == 'FL4W'" translate> Security Deposit Asset </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.DownPaymentGrossAmt | number:'.2':'en-US'}} </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel" *ngIf="BizTemplateCode != 'FL4W'" translate> TDP </label>
          <label class="adInsLabel" *ngIf="BizTemplateCode == 'FL4W'" translate> Total Security Deposit</label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.TotalDownPaymentNettAmt | number:'.2':'en-US'}} </label>
        </div>  
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" *ngIf="BizTemplateCode != 'FL4W'" translate> DP Asset - Subsidy DP </label>
          <label class="adInsLabel" *ngIf="BizTemplateCode == 'FL4W'" translate> Security Deposit Asset  - Security Deposit Subsidy </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.DownPaymentNettAmt | number:'.2':'en-US'}} </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel" *ngIf="BizTemplateCode != 'FL4W'" translate> TDP Paid at MF </label>
          <label class="adInsLabel" *ngIf="BizTemplateCode == 'FL4W'" translate> Total Security Deposit Paid at MF </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.TdpPaidCoyAmt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
  </div>
  <br>
  <div class="form-group row">
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> NTF </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.NtfAmt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> First Installment Type </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appObj?.FirstInstTypeName}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Effective Rate to Customer </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.EffectiveRatePrcnt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Standard Rate </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.StdEffectiveRatePrcnt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Flat Rate to Customer </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.FlatRatePrcnt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
        </div>
        <div class="col-md-6">
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Installment Amount </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.InstAmt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Num of Inst </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appObj?.NumOfInst}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Grace Period </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.GracePeriodTypeName != null ? appFinDataObj?.GracePeriodTypeName + ' / ' + appFinDataObj?.GracePeriod + ' Installment' : '-'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Rounding </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.RoundingAmt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6" *ngIf="appFinDataObj?.MrInstSchemeCode == 'BL'">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Balloon Value Amount </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.BalloonValueAmt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6" *ngIf="appFinDataObj?.MrInstSchemeCode == 'STLS' || appFinDataObj?.MrInstSchemeCode == 'STCM'">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Cummulative Tenor </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.CummulativeTenor}} </label>
        </div>
      </div>
    </div>
  </div>
  <br>
  <div class="form-group row">
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Total Interest </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.TotalInterestAmt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Diff Rate Amount </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.DiffRateAmt | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Total AR </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.TotalAr | number:'.2':'en-US'}} </label>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="row">
        <div class="col-md-6">
          <label class="adInsLabel" translate> Gross Yield </label>
        </div>
        <div class="col-md-6">
          <label class="adInsLabel"> {{appFinDataObj?.GrossYieldPrcnt | number:'.2':'en-US'}}%</label>
        </div>
      </div>
    </div>
  </div>
  <br>
  <table class="table table-responsive-md text-center table-hover">
    <thead>
      <tr class="table-header">
        <th style="text-align: center;"><span class="thead-header" name="MrSubsidyFromTypeName" translate>
            No
          </span>
        </th>
        <th style="text-align: center;"><span class="thead-header" name="MrSubsidyFromValueName" translate>
          Installment Amount  
          </span>
        </th>
        <th style="text-align: center;"><span class="thead-header" name="MrSubsidyAllocName" translate>
          Principal Amount
          </span>
        </th>
        <th style="text-align: center;"><span class="thead-header" name="MrSubsidyValueTypeName" translate>
          Interest Amount
          </span>
        </th>
        <th style="text-align: center;"><span class="thead-header" name="SubsidyPrcnt" translate>
          Os Principal Amount
        </span>
        </th>
        <th style="text-align: center;"><span class="thead-header" name="SubsidyAmt" translate>
          Os Interest Amount  
        </span>
        </th>
      </tr>
    </thead>
    <tbody *ngIf = "listInstallment.length == 0">
      <tr>
        <td colspan="100%">No Data Available</td>
      </tr>
    </tbody>
    <tbody *ngIf = "listInstallment.length > 0">
      <tr *ngFor="let item of listInstallment; let i = index">
        <td style="text-align: center;">{{item.InstSeqNo}}</td>
        <td style="text-align: right;">{{item.InstAmt | number : '1.2-2'}}</td>
        <td style="text-align: right;">{{item.PrincipalAmt | number : '1.2-2'}}</td>
        <td style="text-align: right;">{{item.InterestAmt| number : '1.2-2'}}</td>
        <td style="text-align: right;">{{item.OsPrincipalAmt| number : '1.2-2'}}</td>
        <td style="text-align: right;">{{item.OsInterestAmt| number : '1.2-2'}}</td>
      </tr>
    </tbody>
  </table>
</div>

<div *ngIf="BizTemplateCode === 'OPL'">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
        <div class="px-3">

          <lib-ucSubsection [id]="'assetDataId'" [title]="'List of Asset'" [panel]="'assetData'">
          </lib-ucSubsection>
          <div id="assetData">
            <table class="table table-responsive-md text-center table-hover">
              <thead>
                <tr class="table-header">
                  <th><span class="thead-header" translate>Asset Seq No</span></th>
                  <th><span class="thead-header" translate>App Asset No</span></th>
                  <th><span class="thead-header" translate>Asset Name</span></th>
                  <th><span class="thead-header" translate>Security Deposit</span></th>
                  <th><span class="thead-header" translate>Total Cost</span></th>
                  <th><span class="thead-header" translate>Margin</span></th>
                  <th><span class="thead-header" translate>Total Rental Amount</span></th>
                  <th><span class="thead-header" translate>Rental Amount (Per Period)</span></th>
                  <th><span class="thead-header" translate>Gross Yield (%)</span></th>
                </tr>
              </thead>
  
              <tbody>
                <tr *ngIf="listAsset?.length === 0">
                  <td colspan="100%">No Data Available</td>
                </tr>
                <tr *ngFor="let item of listAsset; let i = index">
                  <td>{{item.AssetSeqNo}}</td>
                  <td>
                    <a [routerLink]="['/View/AppAsset']" target="_blank"
                      [queryParams]="{ AppId: AppId, AppAssetId: item.AppAssetId }">
                      {{item.AppAssetNo}}
                    </a>
                  </td>
                  <td class="text-left">
                    {{item.AssetName}} - {{item.Color}} - {{item.AssetCondition}}
                  </td>
                  <td class="text-right">{{item.SecurityDepositAmt | number:'.2':'en-US'}}</td>
                  <td class="text-right">{{item.TotalCostBeforeMargin | number:'.2':'en-US'}}</td>
                  <td class="text-right">{{item.MarginAmt | number:'.2':'en-US'}}</td>
                  <td class="text-right">{{item.TotalCostAfterMargin | number:'.2':'en-US'}}</td>
                  <td class="text-right">{{item.RentAmt | number:'.2':'en-US'}}</td>
                  <td class="text-right">{{item.GrossYieldPrcnt | number:'.6':'en-US'}}%</td>
                </tr>
              </tbody>
            </table>
          </div>

          <lib-ucSubsection [id]="'SummaryId'" [title]="'Summary'" [panel]="'Summary'">
          </lib-ucSubsection>
          <div id="Summary">
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Rental Period</label>
              <label class="col-md-3 adins-label text-right">{{listAsset[0]?.Tenor}} / {{listAsset[0]?.FirstInstType}}</label>
              <label class="col-md-3 adins-label" translate>Total Margin</label>
              <label class="col-md-3 adins-label text-right">{{TotalMarginAmt | number:'.2':'en-US'}}</label>
            </div>

            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Total # of Asset</label>
              <label class="col-md-3 adins-label text-right">{{listAsset[0]?.TotalAsset}}</label>
              <label class="col-md-3 adins-label" translate><b>Total Rental Amount</b></label>
              <label class="col-md-3 adins-label text-right"><b>{{TotalCostAfterMargin | number:'.2':'en-US'}}</b></label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Total Asset Price (After Discount + Accessory)</label>
              <label class="col-md-3 adins-label text-right">{{TotalAssetValue | number:'.2':'en-US'}}</label>
              <label class="col-md-3 adins-label" translate>Rental Amount (Per Period)</label>
              <label class="col-md-3 adins-label text-right">{{TotalRentAmtPerPeriod | number:'.2':'en-US'}}</label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Total Asset Residual Value</label>
              <label class="col-md-3 adins-label text-right">{{TotalAssetResidualValueAmt | number:'.2':'en-US'}}</label>
              <label class="col-md-3 adins-label" translate>Rental Amount + VAT (Per Period)</label>
              <label class="col-md-3 adins-label text-right">{{TotalRentAfterVatAmt | number:'.2':'en-US'}}</label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Total Depreciation</label>
              <label class="col-md-3 adins-label text-right">{{TotalDepreciationAmt | number:'.2':'en-US'}}</label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Total Asset Expense</label>
              <label class="col-md-3 adins-label text-right">{{TotalAssetExpense | number:'.2':'en-US'}}</label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Total COF Interest</label>
              <label class="col-md-3 adins-label text-right">{{TotalCofInterestAmt | number:'.2':'en-US'}}</label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate><b>Total Cost</b></label>
              <label class="col-md-3 adins-label text-right"><b>{{TotalCostBeforeMargin | number:'.2':'en-US'}}</b></label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Total Fee Non Capitalized</label>
              <label class="col-md-3 adins-label text-right">{{FeeNonCapitalized | number:'.2':'en-US'}}</label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate>Total Security Deposit</label>
              <label class="col-md-3 adins-label text-right">{{TotalSecurityDepositAmt | number:'.2':'en-US'}}</label>
            </div>
            
            <div class="form-group row">
              <label class="col-md-3 adins-label" translate><b>Total Paid In Advance</b></label>
              <label class="col-md-3 adins-label text-right"><b>{{TotalPaidInAdvance | number:'.2':'en-US'}}</b></label>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>