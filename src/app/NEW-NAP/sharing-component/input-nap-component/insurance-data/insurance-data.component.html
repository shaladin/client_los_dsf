<div class="col-md-12">
  <div class="card">
    <div class="card-body">
      <div class="px-3">
        <form class="form form-horizontal" [formGroup]="InsuranceDataForm" (ngSubmit)="InsuranceDataForm.valid && SaveForm()"
            #enjiForm="ngForm">
            <div class="form-body">
              <lib-ucSubsection [id]="'assetDataId'" [title]="'Asset Data'" [panel]="'assetData'">
              </lib-ucSubsection>
              <div id="assetData">
                <div class="form-group row">
                  <label class="col-md-2" translate>Asset Name</label>
                  <label class="col-md-4" translate>{{appAssetObj?.FullAssetName}}</label>
                </div>
              </div>
              <lib-ucSubsection [id]="'assetAccessoriesId'" [title]="'Asset Accessories'" [panel]="'assetAccessories'">
              </lib-ucSubsection>
              <div id="assetAccessories">
                <div class="form-group row">
                    <table class="table table-responsive-md text-center table-hover">
                      <thead>
                        <tr class="table-header">
                          <th style="text-align: center;"><span class="thead-header" translate>No
                          </span>
                          </th>
                          <th style="text-align: center;"><span class="thead-header" translate>Accessory
                          </span>
                          </th>
                          <th style="text-align: center;"><span class="thead-header" translate>Accessory Price
                          </span>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of appAssetAccessoryObjs; let i = index">
                          <td style="text-align: center;">{{i + 1}}</td>
                          <td style="text-align: center;">{{item.AssetAccessoryName}}</td>
                          <td style="text-align: center;">{{item.AccessoryPriceAmt | number:'.2':'en-US'}}</td>
                        </tr>
                      </tbody>
                    </table>
                </div>
              </div>
              <lib-ucSubsection [id]="'insuranceInfoId'" [title]="'Insurance Information'" [panel]="'insuranceInformation'">
              </lib-ucSubsection>
              <div id="insuranceInformation">
                <div class="form-group row">
                  <label class="col-md-2 adins-required-label" for="insuredBy" translate>Insured By</label>
                  <div class="col-md-4">
                    <select class="form-control" id="insuredBy" formControlName="InsAssetCoveredBy" (change)="InsuredByChanged($event)"
                    [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.InsAssetCoveredBy.invalid }">
                      <option *ngFor="let item of insuredByObj" [value]="item.Key">
                        {{item.Value}}
                      </option>
                    </select>
                    <lib-uc-show-errors [control]="InsuranceDataForm.controls.InsAssetCoveredBy" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                  </div>
                </div>
                <div *ngIf="InsuranceDataForm.controls.InsAssetCoveredBy.value == 'CU' || InsuranceDataForm.controls.InsAssetCoveredBy.value == 'CUCO'">
                  <div *ngIf="InsuranceDataForm.controls.InsAssetCoveredBy.value == 'CUCO'">
                    <div class="form-group row">
                      <label class="col-md-2" style="font-weight:bold" translate>Customer</label>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2 adins-required-label" for="insuredBy" translate>Insco Branch Name</label>
                    <div class="col-md-4">
                      <input type="text" id="policyNo" class="form-control" formControlName="CustInscoBranchName"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.CustInscoBranchName.invalid }">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.CustInscoBranchName" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                    <label class="col-md-2" for="policyNo" translate>Policy No</label>
                    <div class="col-md-4">
                      <input type="text" id="policyNo" class="form-control" formControlName="InsPolicyNo"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.InsPolicyNo.invalid }">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.InsPolicyNo" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2 adins-required-label" for="custCvgAmt" translate>Coverage Amount</label>
                    <div class="col-md-4">
                      <input type="" currencyMask id="custCvgAmt" class="form-control" formControlName="CustCvgAmt"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.CustCvgAmt.invalid }">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.CustCvgAmt" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                    <label class="col-md-2" for="policyName" translate>Policy Name</label>
                    <div class="col-md-4">
                      <input type="text" id="policyName" class="form-control" formControlName="InsPolicyName"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.InsPolicyName.invalid }">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.InsPolicyName" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2 adins-required-label" for="startDt" translate>Start Date</label>
                    <div class="col-md-4">
                      <input type="date" class="form-control" formControlName="CustCoverStartDt" id="startDt"
                      [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.CustCoverStartDt.invalid }">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.CustCoverStartDt" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                    <label class="col-md-2 adins-required-label" for="endDt" translate>End Date</label>
                    <div class="col-md-4">
                      <input type="date" class="form-control" formControlName="EndDt" id="endDt"
                      [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.EndDt.invalid }">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.EndDt" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" for="notes" translate>Insurance Notes</label>
                    <div class="col-md-4">
                      <textarea rows="5" id="notes" class="form-control" formControlName="CustNotes" 
                      [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.CustNotes.invalid }"></textarea>
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.CustNotes" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                  </div>
                </div>
                <div *ngIf="InsuranceDataForm.controls.InsAssetCoveredBy.value == 'CO' || InsuranceDataForm.controls.InsAssetCoveredBy.value == 'CUCO'">
                  <div *ngIf="InsuranceDataForm.controls.InsAssetCoveredBy.value == 'CUCO'">
                    <div class="form-group row">
                      <label class="col-md-2" style="font-weight:bold" translate>Company</label>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2 adins-required-label" for="paidBy" translate>Paid By</label>
                    <div class="col-md-4">
                      <mat-radio-group formControlName="InsAssetPaidBy">
                        <mat-radio-button class="custom-control custom-radio display-inline-block" *ngFor="let item of paidByObj" [value]="item.Key">
                          {{item.Value}}
                        </mat-radio-button>
                      </mat-radio-group>
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.InsAssetPaidBy" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                    <label class="col-md-2 adins-required-label" for="insuredBy" translate>Insco Branch Name</label>
                    <div class="col-md-4">
                      <select class="form-control" id="insuredBy" formControlName="InscoBranchCode" (change)="InscoBranchCodeChanged($event)"
                      [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.InscoBranchCode.invalid }">
                        <option *ngFor="let item of inscoBranchObj" [value]="item.Key">
                          {{item.Value}}
                        </option>
                      </select>
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.InscoBranchCode" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2 adins-required-label" for="assetRegion" translate>Asset Region</label>
                    <div class="col-md-4">
                      <select class="form-control" id="assetRegion" formControlName="InsAssetRegion" (change)="AssetRegionChanged($event)"
                      [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.InsAssetRegion.invalid }">
                        <option *ngFor="let item of insAssetRegionObj" [value]="item.Key">
                          {{item.Value}}
                        </option>
                      </select>
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.InsAssetRegion" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                    <label class="col-md-2 adins-required-label" for="coverPeriod" translate>Cover Period</label>
                    <div class="col-md-4">
                      <select class="form-control" id="coverPeriod" formControlName="InsAssetCoverPeriod" (change)="CoverPeriodChanged($event)"
                      [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.InsAssetCoverPeriod.invalid }">
                        <option *ngFor="let item of insAssetCoverPeriodObj" [value]="item.Key">
                          {{item.Value}}
                        </option>
                      </select>
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.InsAssetCoverPeriod" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2 adins-required-label" for="cvgAmt" translate>Coverage Amount</label>
                    <div class="col-md-4">
                      <input type="" currencyMask id="cvgAmt" class="form-control" formControlName="CvgAmt"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.CvgAmt.invalid }" (ngModelChange)="CvgAmtChanged($event)">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.CvgAmt" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                    <label class="col-md-2 adins-required-label" for="insLength" translate>Insurance Length</label>
                    <div class="col-md-4">
                      <input type="number" id="insLength" min="minInsLength" max="maxInsLength" step="0.01" class="form-control adInsInput" formControlName="InsLength" (change)="InsLengthChanged($event)"
                      [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.InsLength.invalid}">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.InsLength" [submit]="enjiForm.submitted"></lib-uc-show-errors>  
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" for="notes" translate>Insurance Notes</label>
                    <div class="col-md-4">
                      <textarea rows="5" id="notes" class="form-control" formControlName="Notes" 
                      [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.Notes.invalid }"></textarea>
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.Notes" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                  </div>
                  <div class="form-actions right">
                    <button type="button" class="btn btn-raised btn-primary" (click)="GenerateInsurance()">
                      <i class="fa fa-check-square-o"></i> Generate Insurance
                    </button>
                  </div>
                </div>
              </div>
              <div *ngIf="showGenerate == true && (InsuranceDataForm.controls.InsAssetCoveredBy.value == 'CO' || InsuranceDataForm.controls.InsAssetCoveredBy.value == 'CUCO')">
                <lib-ucSubsection [id]="'insuranceFeeId'" [title]="'Insurance Fee'" [panel]="'insuranceFee'">
                </lib-ucSubsection>
                <div id="insuranceFee">
                  <div class="form-group row">
                    <label class="col-md-2" for="adminFee" translate>Admin Fee</label>
                    <div class="col-md-4">
                      <input type="" currencyMask id="adminFee" class="form-control" formControlName="CustAdminFeeAmt"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.CustAdminFeeAmt.invalid }" (ngModelChange)="CustAdminFeeAmtChanged($event)">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.CustAdminFeeAmt" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>
                  </div>
                </div>
                <lib-ucSubsection [id]="'insuranceCoverageId'" [title]="'Insurance Coverage'" [panel]="'insuranceCoverage'">
                </lib-ucSubsection>
                <div id="insuranceCoverage">
                  <div class="form-group row">
                    <label class="col-md-2" for="mainCvg" translate>Main Coverage</label>
                    <div class="col-md-4">
                      <select class="form-control" id="mainCvg" formControlName="InsMainCvgType">
                        <option *ngFor="let item of insMainCvgTypeRuleObj" [value]="item.Key">
                          {{item.Value}}
                        </option>
                      </select>
                    </div>
                    <div class="col-md-6">
                      <button type="button" class="btn btn-raised btn-primary" (click)="ApplyToCoverage()">
                        <i class="fa fa-check-square-o"></i> Apply To All
                      </button>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" for="startDt" translate>Additional Coverage</label>
                    <div class="col-md-4">
                      <label formArrayName="InsAddCvgTypes" *ngFor="let item of InsuranceDataForm.controls.InsAddCvgTypes.controls; let i=index" class="custom-control display-inline-block">
                        <div [formGroupName]="i">
                          <mat-checkbox formControlName="Value">{{insAddCvgTypeRuleObj[i].Value}}</mat-checkbox>
                        </div>
                      </label>
                    </div>
                  </div>
                  <div class="form-actions right">
                    <button type="button" class="btn btn-raised btn-primary" (click)="CalculateInsurance()">
                      <i class="fa fa-check-square-o"></i> Calculate Insurance
                    </button>
                  </div>
                  <div formArrayName="AppInsMainCvgs">
                    <table class="table table-responsive-md text-center table-hover">
                      <thead>
                        <tr>
                          <th class="text-left"><span translate class="thead-header">Year Num</span></th>
                          <th class="text-left"><span translate class="thead-header"># of Month</span></th>
                          <th class="text-left"><span translate class="thead-header">Sum Insured (%)</span></th>
                          <th class="text-left"><span translate class="thead-header">Main Coverage Type</span></th>
                          <th class="text-left"><span translate class="thead-header">Rate</span></th>
                          <th class="text-left"><span translate class="thead-header">Main Premi Amount</span></th>
                        </tr>
                      </thead>
                      <tbody *ngFor="let item of InsuranceDataForm.controls.AppInsMainCvgs.controls;let i = index">
                        <tr [formGroupName]="i">
                          <td class="text-left">
                            {{InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.YearNo.value}}
                          </td>
                          <td class="text-left">
                            {{InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.Tenor.value}}
                          </td>
                          <td class="text-left">
                            {{InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.SumInsuredPrcnt.value}}
                          </td>
                          <td class="text-left">
                            <div class="form-group-row">
                              <div class="col-md-12">
                                <select class="form-control" formControlName="MrMainCvgTypeCode" (change)="MainCvgTypeDetailChanged($event, i)"
                                [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.MrMainCvgTypeCode.invalid }">
                                  <option *ngFor="let item of insMainCvgTypeObj" [value]="item.Key">
                                    {{item.Value}}
                                  </option>
                                </select>
                                <lib-uc-show-errors [control]="InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.MrMainCvgTypeCode" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                              </div>
                            </div>
                          </td>
                          <td class="text-left">
                            {{InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.CustMainPremiRate.value | number:'.2':'en-US'}} %
                          </td>
                          <td class="text-left">
                            {{InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.CustMainPremiAmt.value | number:'.2':'en-US'}}
                          </td>
                        </tr>
                        <tr [formGroupName]="i">
                          <td></td>
                          <td></td>
                          <td></td>
                          <td class="text-left">
                            <label class="col-md-12" style="font-weight:bold">Additional Coverage Type</label>                 
                          </td>
                          <td></td>
                          <td></td>
                        </tr>
                        <tr *ngFor="let item of InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.AppInsAddCvgs.controls; let j=index" [formGroupName]="i">
                          <td></td>
                          <td></td>
                          <td></td>
                          <td class="text-left">
                            <div formArrayName="AppInsAddCvgs">
                              <div [formGroupName]="j">
                                <mat-checkbox formControlName="Value" (change)="IsAddCvgChanged($event)">{{InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.AppInsAddCvgs.controls[j].controls.AddCvgTypeName.value}}</mat-checkbox>
                              </div>
                            </div>
                          </td>
                          <td class="text-left">
                            {{InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.AppInsAddCvgs.controls[j].controls.CustAddPremiRate.value | number:'.2':'en-US'}}
                            <span *ngIf="InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.AppInsAddCvgs.controls[j].controls.PremiumType.value == 'PRCNT'">
                              %
                            </span>
                          </td>
                          <td class="text-left">
                            {{InsuranceDataForm.controls.AppInsMainCvgs.controls[i].controls.AppInsAddCvgs.controls[j].controls.CustAddPremiAmt.value | number:'.2':'en-US'}}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <lib-ucSubsection [id]="'totalPremiId'" [title]="'Total Premi'" [panel]="'totalPremi'">
                </lib-ucSubsection>
                <div id="totalPremi">
                  <div class="form-group row">
                    <label class="col-md-2" translate>Total Main Premi</label>
                    <label class="col-md-4" translate>{{InsuranceDataForm.controls.TotalCustMainPremiAmt.value | number:'.2':'en-US'}}</label>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" translate>Total Additional Premi</label>
                    <label class="col-md-4" translate>{{InsuranceDataForm.controls.TotalCustAddPremiAmt.value | number:'.2':'en-US'}}</label>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" translate>Total Fee</label>
                    <label class="col-md-4" translate>{{InsuranceDataForm.controls.CustAdminFeeAmt.value | number:'.2':'en-US'}}</label>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" translate>Total Premi to Customer</label>
                    <label class="col-md-4" translate>{{InsuranceDataForm.controls.TotalCustMainPremiAmt.value + InsuranceDataForm.controls.TotalCustAddPremiAmt.value + InsuranceDataForm.controls.CustAdminFeeAmt.value | number:'.2':'en-US'}}</label>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" for="discAmt" translate>Discount</label>
                    <div class="col-md-4">
                      <input type="" currencyMask id="discAmt" class="form-control" formControlName="TotalCustDiscAmt"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.TotalCustDiscAmt.invalid }">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.TotalCustDiscAmt" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>                  
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" translate>Total Premi to Customer after Discount</label>
                    <label class="col-md-4" translate>{{InsuranceDataForm.controls.TotalCustMainPremiAmt.value + InsuranceDataForm.controls.TotalCustAddPremiAmt.value + InsuranceDataForm.controls.CustAdminFeeAmt.value - InsuranceDataForm.controls.TotalCustDiscAmt.value | number:'.2':'en-US'}}</label>
                  </div>
                  <div class="form-group row">
                    <label class="col-md-2" for="insCpltzAmt" translate>Capitalize Amount</label>
                    <div class="col-md-4">
                      <input type="" currencyMask id="insCpltzAmt" class="form-control" formControlName="InsCpltzAmt"
                        [ngClass]="{ 'is-invalid': enjiForm.submitted && InsuranceDataForm.controls.InsCpltzAmt.invalid }">
                      <lib-uc-show-errors [control]="InsuranceDataForm.controls.InsCpltzAmt" [submit]="enjiForm.submitted"></lib-uc-show-errors>
                    </div>                  
                  </div>
                </div>
              </div>
            </div>
            <div class="form-actions right">
              <button type="submit" class="btn btn-raised btn-primary">
                <i class="fa fa-check-square-o"></i> Save
              </button>
              <!-- <button type="button" class="btn btn-raised btn-primary" (click)="test()">
                <i class="fa fa-check-square-o"></i> test
              </button> -->
            </div>
        </form>
      </div>
    </div>
  </div>
</div>