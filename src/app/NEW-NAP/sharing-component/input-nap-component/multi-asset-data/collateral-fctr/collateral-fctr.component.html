<form class="form form-horizontal" #enjiForm="ngForm" [formGroup]="AddCollForm"
  (ngSubmit)="AddCollForm.valid && SaveForm()">
  <lib-ucSubsection [id]="'AddCollDatasId'" [title]="'Collateral'" [panel]="'AddCollDatas'">
  </lib-ucSubsection>
  <div [hidden]="HiddenState=='false'">
    <app-multi-collateral-paging (objOutput)="outputValue($event)"></app-multi-collateral-paging>
  </div>
  <div [hidden]="HiddenState=='false'">
    <div class="form-header">
      <h4>Collateral - {{type}}</h4>
    </div>
    <div class="form-body">
      <div class="px-3">
        <lib-ucSubsection [id]="'AdditionalCollId'" [title]="'Collateral'" [panel]="'AdditionalColl'">
        </lib-ucSubsection>
        <div id="AdditionalColl">
          <div class="form-group row" id="ExistingCollateral">
            <label class="col-md-2" translate>Existing Collateral</label>
            <div class="col-md-4">
              <lib-uclookupgeneric [lookupInput]="inputLookupObjCollateral" [parentForm]='AddCollForm'
                [enjiForm]='enjiForm' [identifier]="'ExistingCollateralObj'"
                (lookup)="getLookupAppCollateralResponse($event)">
              </lib-uclookupgeneric>
            </div>
          </div>
        </div>
        <lib-ucSubsection [id]="'AddCollInfoId'" [title]="'Collateral Information'" [panel]="'AddCollInfo'">
        </lib-ucSubsection>
        <div id="AddCollInfo">
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Collateral Type</label>
            <div class="col-md-3">
              <select class="form-control" formControlName="AssetTypeCode" (change)="onItemChange($event.target.value)"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.AssetTypeCode.invalid }">
                <option *ngFor="let item of CollTypeList" [value]="item.Key">{{item.Value}}</option>
              </select>
              <lib-uc-show-errors [control]="AddCollForm.controls.AssetTypeCode" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Collateral Name</label>
            <div class="col-md-3" *ngIf="inputLookupObj.isReady">
              <lib-uclookupgeneric [lookupInput]="inputLookupObj" [parentForm]='AddCollForm' [enjiForm]='enjiForm'
                [identifier]="'FullAssetName'" (lookup)="getLookupCollateralTypeResponse($event)" #LookupCollateral>
              </lib-uclookupgeneric>
            </div>
            <label class="col-md-1"></label>
            <label class="col-md-2 adins-required-label" translate>Collateral Price</label>
            <div class="col-md-2">
              <input currencyMask type="text" class="form-control" formControlName="CollateralValueAmt"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.CollateralValueAmt.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.CollateralValueAmt" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Manufacturing Year</label>
            <div class="col-md-3">
              <input type="text" class="form-control" formControlName="ManufacturingYear"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.ManufacturingYear.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.ManufacturingYear" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
            <label class="col-md-1"></label>
            <label class="col-md-2 adins-required-label" translate>Collateral Codition</label>
            <div class="col-md-3">
              <select class="form-control" formControlName="MrCollateralConditionCode"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.MrCollateralConditionCode.invalid }">
                <option *ngFor="let item of ConditionCodeList" [value]="item.Key">{{item.Value}}</option>
              </select>
              <lib-uc-show-errors [control]="AddCollForm.controls.MrCollateralConditionCode"
                [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Serial No 1</label>
            <div class="col-md-3">
              <input type="text" class="form-control" formControlName="SerialNo1"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.SerialNo1.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.SerialNo1" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
            <label class="col-md-1"></label>
            <label class="col-md-2 adins-required-label" translate>Collateral Usage</label>
            <div class="col-md-3">
              <select class="form-control" formControlName="MrCollateralUsageCode"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.MrCollateralUsageCode.invalid }">
                <option *ngFor="let item of UsageCodeList" [value]="item.Key">{{item.Value}}</option>
              </select>
              <lib-uc-show-errors [control]="AddCollForm.controls.MrCollateralUsageCode" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Serial No 2</label>
            <div class="col-md-3">
              <input type="text" class="form-control" formControlName="SerialNo2"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.SerialNo2.invalid }">
              
                <lib-uc-show-errors [control]="AddCollForm.controls.SerialNo2" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
            <label class="col-md-1"></label>
            <label class="col-md-2 adins-required-label" translate>Collateral Tax Date</label>
            <div class="col-md-2">
              <input type="date" class="form-control" formControlName="AssetTaxDt"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.AssetTaxDt.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.AssetTaxDt" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Serial No 3</label>
            <div class="col-md-3">
              <input type="text" class="form-control" formControlName="SerialNo3"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.SerialNo3.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.SerialNo3" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
            <label class="col-md-1"></label>
            <label class="col-md-2 adins-label" translate>Notes</label>
            <div class="col-md-3">
              <textarea type="textarea" class="form-control" formControlName="CollateralNotes"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.CollateralNotes.invalid}"></textarea>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Portion Percentage</label>
            <div class="col-md-3">
              <input type="text" class="form-control" formControlName="CollateralPrcnt"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.CollateralPrcnt.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.CollateralPrcnt" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
        </div>
        <lib-ucSubsection [id]="'AddCollAttributeId'" [title]="'Collateral Attribute'" [panel]="'AddCollAttribut'">
        </lib-ucSubsection>
        <div id="AddCollAttribut" formArrayName="ListAttr">
          <!-- <div class="col-md-6 form-group row" *ngFor="let item of AddCollForm.controls.ListAttr.controls; let i = index"
            [formGroupName]="i">
            <label class="col-md-4 adins-required-label" translate>Attr</label>
            <div class="col-md-8">
              <input type="text" class=" form-control width-100-per" formControlName="AppAttrValue">
            </div>
          </div> -->
        </div>
        <lib-ucSubsection [id]="'AddCollDocumentId'" [title]="'Collateral Document'" [panel]="'AddCollDocument'">
        </lib-ucSubsection>
        <div id="AddCollDocument" formArrayName="items">
          <table class="table table-responsive-md text-center table-hover">
            <thead>
              <tr class="table-header">
                <th><span translate class="thead-header">Document</span></th>
                <th><span translate class="thead-header">Recieved</span></th>
                <th><span translate class="thead-header">Document No</span></th>
                <th><span translate class="thead-header">Expired Date</span></th>
                <th><span translate class="thead-header">Document Notes</span></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of AddCollForm.controls.items.controls; let i = index" [formGroupName]="i">
                <td>{{item.controls.AssetDocName.value}}</td>
                <td>
                  <input type="checkbox" class="border-primary" formControlName="IsReceived">
                </td>
                <td>
                  <input type="text" class="form-control width-100-per" formControlName="DocNo">
                  <lib-uc-show-errors [control]="AddCollForm.controls.DocNo" [submit]="enjiForm.submitted">
                  </lib-uc-show-errors>
                </td>
                <td>
                  <input type="date" class="form-control width-100-per" formControlName="ACDExpiredDt">
                  <lib-uc-show-errors [control]="AddCollForm.controls.ACDExpiredDt" [submit]="enjiForm.submitted">
                  </lib-uc-show-errors>
                </td>
                <td>
                  <input type="text" class="form-control width-100-per" formControlName="DocNotes">
                  <lib-uc-show-errors [control]="AddCollForm.controls.DocNotes" [submit]="enjiForm.submitted">
                  </lib-uc-show-errors>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <lib-ucSubsection [id]="'AddCollUserId'" [title]="'Collateral User'" [panel]="'AddCollUser'">
        </lib-ucSubsection>
        <div id="AddCollUser">
          <div class="form-group row">
            <label class="col-md-2" translate>Self Usage</label>
            <div class="col-md-3">
              <input type="checkbox" (change)="CopyUser()">
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Collateral User Name</label>
            <div class="col-md-3">
              <input type="text" class="form-control" formControlName="UserName"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.UserName.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.UserName" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
            <label class="col-md-1"></label>
            <label class="col-md-2 adins-required-label" translate>Collateral User Relationship</label>
            <div class="col-md-3">
              <select class="form-control" formControlName="MrUserRelationshipCode"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.MrUserRelationshipCode.invalid }">
                <option *ngFor="let item of OwnerRelationshipObj" [value]="item.Key">{{item.Value}}</option>
              </select>
              <lib-uc-show-errors [control]="AddCollForm.controls.MrUserRelationshipCode" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
        </div>
        <lib-ucSubsection [id]="'AddCollOwnerId'" [title]="'Collateral Owner'" [panel]="'AddCollOwner'">
        </lib-ucSubsection>
        <div id="AddCollOwner">
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Owner Name</label>
            <div class="col-md-3">
              <input type="text" class="form-control" formControlName="OwnerName"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.OwnerName.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.OwnerName" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
            <label class="col-md-1"></label>
            <label class="col-md-2 adins-required-label" translate>ID Type</label>
            <div class="col-md-2">
              <select class="form-control" formControlName="MrIdTypeCode"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.MrIdTypeCode.invalid }">
                <option *ngFor="let item of IdTypeList" [value]="item.Key">{{item.Value}}</option>
              </select>
              <lib-uc-show-errors [control]="AddCollForm.controls.MrIdTypeCode" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Owner Relationship</label>
            <div class="col-md-3">
              <select class="form-control" formControlName="MrOwnerRelationshipCode"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.MrOwnerRelationshipCode.invalid }">
                <option *ngFor="let item of OwnerRelationshipObj" [value]="item.Key">{{item.Value}}</option>
              </select>
              <lib-uc-show-errors [control]="AddCollForm.controls.MrOwnerRelationshipCode"
                [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
            <label class="col-md-1"></label>
            <label class="col-md-2 adins-required-label" translate>Owner Id No</label>
            <div class="col-md-2">
              <input type="text" class="form-control" formControlName="OwnerIdNo"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.OwnerIdNo.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.OwnerIdNo" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-md-2 adins-required-label" translate>Owner Mobile Phone No</label>
            <div class="col-md-2">
              <input type="text" class="form-control" formControlName="OwnerMobilePhnNo"
                [ngClass]="{ 'is-invalid': enjiForm.submitted && AddCollForm.controls.OwnerMobilePhnNo.invalid }">
              <lib-uc-show-errors [control]="AddCollForm.controls.OwnerMobilePhnNo" [submit]="enjiForm.submitted">
              </lib-uc-show-errors>
            </div>
          </div>
          <lib-ucaddress #UcAddrGrp [addressObj]="inputAddressObjForLegal" [enjiForm]="enjiForm" [identifier]="'ownerAddrObj'" [UCAddrForm]="AddCollForm">
          </lib-ucaddress>
          <!-- <lib-ucaddress #UcAddrGrp [showSubsection]="false" [UCAddrForm]="AddCollForm" [enjiForm]="enjiForm"
            [identifier]="'ownerAddrObj'" [default]="ownerAddrObj" [inputField]="inputFieldLegalObj" [showPhn1]="false"
            [showPhn2]="false" [showPhn3]="false" [showFax]="false">
          </lib-ucaddress> -->
        </div>
        <lib-ucSubsection [id]="'AddCollLocationId'" [title]="'Collateral Location'" [panel]="'AddCollLocation'">
        </lib-ucSubsection>
        <div id="AddCollLocation">
          <div class="form-group row">
            <label class="col-md-2" translate>Copy Address From</label>
            <div class="col-md-4">
              <div class="input-group">
                <select class="form-control" formControlName="CopyFromLegal" [(ngModel)]="copyFromLegal">
                  <option *ngFor="let item of copyToLocationObj" [value]="item.Key">
                    {{item.Value}}
                  </option>
                </select>
                <div class="input-group-append">
                  <span class="input-group-btn">
                    <button class="btn btn-raised btn-primary" type="button" (click)="copyToLocation()">
                      <i class="fa fa-check-square-o"></i>Copy
                    </button>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <lib-ucaddress #UcAddrGrp [addressObj]="inputAddressObjForLoc" [enjiForm]="enjiForm" [identifier]="'locationAddrObj'" [UCAddrForm]="AddCollForm">
          </lib-ucaddress>
          <!-- <lib-ucaddress #UcAddrGrp2 [showSubsection]="false" [UCAddrForm]="AddCollForm" [enjiForm]="enjiForm"
            [identifier]="'locationAddrObj'" [default]="locationAddrObj" [inputField]="inputFieldLocationObj"
            [showPhn1]="false" [showPhn2]="false" [showPhn3]="false" [showFax]="false">
          </lib-ucaddress> -->
        </div>
        <div class="form-actions right">
          <button type="button" (click)="Cancel()" class="btn btn-raised btn-warning mr-1" translate>
            <i class="fa fa-times "></i> Cancel
          </button>
          <button type="submit" class="btn btn-raised btn-primary">
            <i class="fa fa-check"></i> Save
          </button>
        </div>
      </div>
    </div>
  </div>
</form>