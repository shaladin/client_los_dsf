<div class="row text-left">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
        <div class="card-header header-title">
          <div class="row">
            <div class="col-md-8">
              <h4 class="card-title" id="horz-layout-colored-controls" translate> MOU Review - Factoring
              </h4>
            </div>
          </div>
        </div>
        <lib-ucviewgeneric [viewInput]="viewObj" (callback)="GetCallBack($event)"></lib-ucviewgeneric>
        <div class="px-3">
          <mat-tab-group>
            <mat-tab label="MOU Detail">
              <ng-template matTabContent>
                <app-mou-view-detail [MouCustId]="MouCustId" [MouType]="MouType"></app-mou-view-detail>
              </ng-template>
            </mat-tab>
            <mat-tab label="Fee">
              <ng-template matTabContent>
                <app-mou-view-fee [MouCustId]="MouCustId"></app-mou-view-fee>
              </ng-template>
            </mat-tab>
            <mat-tab label="Collateral">
              <ng-template matTabContent>
                <app-mou-view-addcoll [MouCustId]="MouCustId"></app-mou-view-addcoll>
              </ng-template>
            </mat-tab>
            <mat-tab label="Term and Condition">
              <ng-template matTabContent>
                <app-mou-view-tc [MouCustId]="MouCustId"></app-mou-view-tc>
              </ng-template>
            </mat-tab>
            <mat-tab label="Document">
              <ng-template matTabContent>
                <app-mou-view-doc></app-mou-view-doc>
              </ng-template>
            </mat-tab>
            <mat-tab label="Survey">
              <ng-template matTabContent>
                <app-mou-view-survey [MouCustId]="MouCustId"></app-mou-view-survey>
              </ng-template>
            </mat-tab>
            <mat-tab label="Legal Review" *ngIf="this.MrCustTypeCode == 'COMPANY'">
              <ng-template matTabContent>
                <app-mou-view-legal [MouCustId]="MouCustId"></app-mou-view-legal>
              </ng-template>
            </mat-tab>
          </mat-tab-group>

          <form class="form form-horizontal" [formGroup]="MouReviewDataForm" (ngSubmit)="MouReviewDataForm.valid"
            #enjiForm="ngForm">
            <lib-ucSubsection [id]="'ApvRecommendationId'" [title]="'Approval Recommendation'"
              [panel]="'ApvRecommendation'">
            </lib-ucSubsection>
            <div class="form-body" id="ApvRecommendation" formArrayName="ApvRecommendation">
              <div [formGroupName]="i"
                *ngFor="let item of MouReviewDataForm.controls.ApvRecommendation.controls; let i = index"
                class="form-group row">
                <label
                  class="col-md-2 adins-required-label">{{MouReviewDataForm.value.ApvRecommendation[i].RecommendationName}}</label>
                <div class="col-md-4">
                  <input type="text" class="form-control" formControlName="RecommendationValue"
                    [ngClass]="{ 'is-invalid': enjiForm.submitted && MouReviewDataForm.controls.ApvRecommendation.controls[i].controls.RecommendationValue.invalid }">
                  <lib-uc-show-errors
                    [control]="MouReviewDataForm.controls.ApvRecommendation.controls[i].controls.RecommendationValue"
                    [submit]="enjiForm.submitted"></lib-uc-show-errors>
                </div>
              </div>
            </div>
            <lib-ucSubsection [id]="'ApvReqId'" [title]="'Approval Request'" [panel]="'ApvReq'">
            </lib-ucSubsection>
            <div class="form-body" id="ApvReq">
              <div class="form-group row">
                <label class="col-md-2 adInsLabel">Approval Amount</label>
                <label class="col-md-2 adInsLabel">{{PlafondAmt | number}}</label>
                <label class="col-md-2"></label>
                <label class="col-md-2 adInsLabel">To Be Approved By</label>
                <div class="col-md-2">
                  <select type="text" class="form-control adInsInput" formControlName="ListApprover"
                    [ngClass]="{ 'is-invalid': enjiForm.submitted && MouReviewDataForm.controls.ListApprover.invalid }">
                    <option *ngFor="let item of listApprover" [value]="item.Key">{{item.Value}}</option>
                  </select>
                  <lib-uc-show-errors [control]="MouReviewDataForm.controls.ListApprover" [submit]="enjiForm.submitted">
                  </lib-uc-show-errors>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-md-2 adInsLabel">Scoring</label>
                <label class="col-md-2 adInsLabel">{{ScoreResult}} - {{MrScoreTypeCode}}</label>
                <label class="col-md-2"></label>
                <label class="col-md-2 adInsLabel">Reason Description</label>
                <div class="col-md-2">
                  <select type="text" class="form-control adInsInput" formControlName="Reason"
                    [ngClass]="{ 'is-invalid': enjiForm.submitted && MouReviewDataForm.controls.Reason.invalid }">
                    <option *ngFor="let item of listReason" [value]="item.Key">{{item.Value}}</option>
                  </select>
                  <lib-uc-show-errors [control]="MouReviewDataForm.controls.Reason" [submit]="enjiForm.submitted">
                  </lib-uc-show-errors>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-md-2" for="notes" translate>Notes</label>
                <div class="col-md-4">
                  <textarea rows="5" id="notes" class="form-control" formControlName="Notes"
                    [ngClass]="{ 'is-invalid': enjiForm.submitted && MouReviewDataForm.controls.Notes.invalid }"></textarea>
                  <lib-uc-show-errors [control]="MouReviewDataForm.controls.Notes" [submit]="enjiForm.submitted">
                  </lib-uc-show-errors>
                </div>
              </div>
              <div class="form-actions right">
                <button type="button" class="btn btn-raised btn-warning mr-1" [routerLink]="['/Mou/Cust/ReviewPaging']"
                  translate>
                  <i class="fa fa-arrow-left"></i> Back
                </button>
                <button type="button" (click)="Return()" class="btn btn-raised btn-primary" translate>
                  <i class="fa fa-reply"></i> Return
                </button>
                &nbsp;
                <button type="button" (click)="Submit()" class="btn btn-raised btn-primary" translate>
                  <i class="fa fa-check"></i> Submit
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>